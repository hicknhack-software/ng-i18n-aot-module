!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ngI18nAotModule",["exports","@angular/core","rxjs"],t):t(e.ngI18nAotModule={},e.ng.core,null)}(this,function(e,o,n){"use strict";var i="_____default-$$$-locale_____",r=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=!1),this.localeMap={},this.locale=i,this.locale$=new n.BehaviorSubject(i),this.forceLocaleExists=!1,this.translationIdMap={},this.registerLocales(e),this.setForceLocaleExists(t)}return e.prototype.setForceLocaleExists=function(e){void 0===e&&(e=!1),this.forceLocaleExists=e},e.prototype.getForceLocaleExists=function(){return this.forceLocaleExists},e.prototype.registerLocales=function(e){for(var t in e)e.hasOwnProperty(t)&&this.registerLocale(t,e[t])},e.prototype.registerLocale=function(e,t){this.localeMap[e]=t},e.prototype.hasLocale=function(e){return!(!this.localeMap.hasOwnProperty(e)||"string"!=typeof this.localeMap[e])},e.prototype.getLocaleName=function(e){return this.hasLocale(e)?this.localeMap[e]:null},e.prototype.getLocales=function(){return this.localeMap},e.prototype.unregisterLocale=function(e){delete this.localeMap[e]},e.prototype.clearLocales=function(){this.localeMap={}},e.prototype.setLocale=function(e){void 0===e&&(e=null),"string"==typeof e&&this.getForceLocaleExists()&&!this.hasLocale(e)||(this.locale=e||i,this.locale$.next(this.locale),this.renderAll(e))},e.prototype.getLocale=function(){return this.locale},e.prototype.getLocaleStream=function(){return this.locale$.asObservable()},e.prototype.isDefaultLocale=function(e){return i===(e||this.getLocale())},e.prototype.subscribe=function(e,t,o,n){var r=this;return e in this.translationIdMap||(this.translationIdMap[e]={}),this.translationIdMap[e][o?i:t]=n,this.renderPartial(e,o?i:t,this.getLocale()),function(){delete r.translationIdMap[e][o?i:t]}},e.prototype.renderAll=function(t){var o=this;Object.keys(this.translationIdMap).forEach(function(e){o.render(e,t)})},e.prototype.render=function(t,o){var n=this,r=Object.keys(this.translationIdMap[t]).filter(function(e){return!(e!==o)}).length?o:i;Object.keys(this.translationIdMap[t]).every(function(e){return n.translationIdMap[t][e](r===e),!0})},e.prototype.renderPartial=function(e,t,o){var n=Object.keys(this.translationIdMap[e]).filter(function(e){return!(e!==o)}).length?o:i,r=this.translationIdMap[e][t];r&&r(n===t)},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:o.Optional}]},{type:void 0,decorators:[{type:o.Optional}]}]},e}(),a=function(){function e(e,t,o,n){this.isDefault=!1,this.ngI18nAotService=e,this.templateReference=t,this.viewContainerReference=o,this.changeDetectorReference=n,this.viewContainerReference.clear()}return e.prototype.ngAfterViewInit=function(){var t=this;this.ngI18nAotServiceUnsubscribeCallback=this.ngI18nAotService.subscribe(this.id,this.locale,this.isDefault,function(e){t.viewContainerReference.clear(),e&&t.viewContainerReference.createEmbeddedView(t.templateReference),t.changeDetectorReference.detectChanges()})},e.prototype.ngOnDestroy=function(){this.ngI18nAotServiceUnsubscribeCallback&&this.ngI18nAotServiceUnsubscribeCallback()},Object.defineProperty(e.prototype,"ngI18nAot",{set:function(e){this.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngI18nAotLocale",{set:function(e){this.locale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngI18nAotIsDefault",{set:function(e){this.isDefault=e},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"[ngI18nAot]"}]}],e.ctorParameters=function(){return[{type:r},{type:o.TemplateRef},{type:o.ViewContainerRef},{type:o.ChangeDetectorRef}]},e.propDecorators={ngI18nAot:[{type:o.Input}],ngI18nAotLocale:[{type:o.Input}],ngI18nAotIsDefault:[{type:o.Input}]},e}(),c=new o.InjectionToken("NgI18nAotOptions");function s(e){return new r(e.hasOwnProperty("locales")?e.locales:{},!!e.hasOwnProperty("forceLocaleExists")&&e.forceLocaleExists)}var t=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:c,useValue:e||{}},{provide:r,useFactory:s,deps:[c]}]}},t.decorators=[{type:o.NgModule,args:[{declarations:[a],exports:[a]}]}],t}();e.NgI18nAotDirective=a,e.NgI18nAotOptionsToken=c,e.NgI18nAotServiceFactory=s,e.NgI18nAotModule=t,e.NgI18nAotService=r,Object.defineProperty(e,"__esModule",{value:!0})});